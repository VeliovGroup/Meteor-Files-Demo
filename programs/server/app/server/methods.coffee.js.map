{"version":3,"sources":["meteor://ðŸ’»app/server/methods.coffee"],"names":[],"mappings":";;;;;;;;;AAAA;;AAAA,KAAK,GAAG,CAAC,OAAJ,CAAY,IAAZ,CAAL;;AAAA,MAEM,CAAC,OAAP,CACE;AAAA,eAAa,SAAC,OAAD;AACX;AAAA,UAAM,OAAN,EAAe,MAAf;AAAA,IACA,OAAO,KADP;AAEA,QAAG,OAAO,CAAC,IAAR,GAAe,OAAO,EAAzB;AACE;AACE,eAAO,EAAE,CAAC,YAAH,CAAgB,OAAO,CAAC,IAAxB,EAA8B;AAAA,UAAC,UAAU,MAAX;SAA9B,CAAP,CADF;OAAA;AAGE,QADI,cACJ;AAAA,eAAO,CAAC,KAAR,CAAc,6BAAd,EAA6C,KAA7C,EAHF;OADF;KAAA;AAME,YAAU,UAAM,CAAC,KAAP,CAAa,GAAb,EAAkB,wCAAlB,CAAV,CANF;KAFA;AASA,WAAO,IAAP,CAVW;EAAA,CAAb;CADF,CAFA","file":"/server/methods.coffee.js","sourcesContent":["fs = Npm.require 'fs'\n\nMeteor.methods\n  getTextFile: (fileRef) ->\n    check fileRef, Object\n    text = false\n    if fileRef.size < 1024 * 64\n      try\n        text = fs.readFileSync fileRef.path, {encoding: 'utf8'}\n      catch error\n        console.error \"[getTextFile] Error happens\", error\n    else\n      throw new Meteor.Error 500, 'File too big to show, please download.'\n    return text"]}